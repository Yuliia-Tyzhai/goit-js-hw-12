{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = (imgInfo) => {\n    return `<li class=\"gallery-card\">\n    <a class=\"gallery-link\" href=\"${imgInfo.largeImageURL}\"> <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" /></a>\n           <div class=\"gallery-info\">\n                <p class=\"likes\">Likes <span>${imgInfo.likes}</span></p>\n                <p class=\"views\">Views <span>${imgInfo.views}</span></p>\n                <p class=\"comments\">Comments <span>${imgInfo.comments}</span></p>\n                <p class=\"downloads\">Downloads <span>${imgInfo.downloads}</span></p>\n            </div>    \n            </li>`;\n}","\nimport axios from \"axios\";\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchPhotos = (searchedQuery, page) => {\n   const axiosOptions = {\n        params: {\n        key: '32552782-0d4c86680018457e820f20492',\n        q: searchedQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: page,\n        per_page: 15,\n    }\n}\n\n    return axios.get('', axiosOptions);\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n\n\nimport { createGalleryCardTemplate } from \"./js/render-functions.js\";\nimport { fetchPhotos } from \"./js/pixabay-api.js\";\n\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.js-loader');\nconst loadMoreBtnEl = document.querySelector('.js-load-more');\n\nlet currentPage = 1;\nlet searchedValue = '';\nconst perPage = 15;\n\nlet lightbox = new SimpleLightbox('.gallery-link');\n\nconst showLoader = () => {\n  loaderEl.classList.remove('is-hidden');\n};\n\nconst hideLoader = () => {\n  loaderEl.classList.add('is-hidden');\n};\n\n\nconst getCardHeight = () => {\n  const card = document.querySelector('.gallery-card');\n  if (card) {\n    return card.getBoundingClientRect().height;\n  }\n  return 0;\n};\n\nconst scrollPage = () => {\n  const cardHeight = getCardHeight();\n  if (cardHeight > 0) {\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth'\n    });\n  }\n};\n\nconst onSearchFormSubmit = async event => {\n  try {\n   event.preventDefault();\n\n   searchedValue = searchFormEl.elements.user_query.value.trim();\n      if (!searchedValue) {\n      iziToast.error({\n        message: 'Please enter a search query.',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    currentPage = 1;\n    loadMoreBtnEl.classList.add('is-hidden');\n    showLoader();\n    \n    const response = await fetchPhotos(searchedValue, currentPage);\n\n    hideLoader();\n    \n    if (response.data.hits.length === 0) {\n      iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      galleryEl.innerHTML = '';\n      searchFormEl.reset();\n      return;\n    }\n\n  const galleryCardsTemplate = response.data.hits.map(imgDetails => createGalleryCardTemplate(imgDetails)).join('');\n    galleryEl.innerHTML = galleryCardsTemplate;\n    loadMoreBtnEl.classList.remove('is-hidden');\n    lightbox.refresh();\n\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nconst onLoadMoreBtnClick = async event => {\n  try {\n    currentPage++;\n    const response = await fetchPhotos(searchedValue, currentPage);\n    \n    const galleryCardsTemplate = response.data.hits.map(imgDetails => createGalleryCardTemplate(imgDetails)).join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n\n    scrollPage();\n\n    const totalHits = response.data.totalHits;\n    const totalPages = Math.ceil(totalHits / perPage);\n    \n if (currentPage === totalPages) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n    \n    lightbox.refresh();\n\n  } catch (err) {\n    console.log(err);\n  }\n};\n  \n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);"],"names":["createGalleryCardTemplate","imgInfo","axios","fetchPhotos","searchedQuery","page","axiosOptions","searchFormEl","galleryEl","loaderEl","loadMoreBtnEl","currentPage","searchedValue","perPage","lightbox","SimpleLightbox","showLoader","hideLoader","getCardHeight","card","scrollPage","cardHeight","onSearchFormSubmit","event","iziToast","response","galleryCardsTemplate","imgDetails","err","onLoadMoreBtnClick","totalHits","totalPages"],"mappings":"owBAAO,MAAMA,EAA6BC,GAC/B;AAAA,oCACyBA,EAAQ,aAAa,oCAAoCA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA,+CAExFA,EAAQ,KAAK;AAAA,+CACbA,EAAQ,KAAK;AAAA,qDACPA,EAAQ,QAAQ;AAAA,uDACdA,EAAQ,SAAS;AAAA;AAAA,mBCJxEC,EAAM,SAAS,QAAU,2BAElB,MAAMC,EAAc,CAACC,EAAeC,IAAS,CACjD,MAAMC,EAAe,CAChB,OAAQ,CACR,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAU,EACb,CACL,EAEI,OAAOH,EAAM,IAAI,GAAII,CAAY,CACrC,ECLMC,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAW,SAAS,cAAc,YAAY,EAC9CC,EAAgB,SAAS,cAAc,eAAe,EAE5D,IAAIC,EAAc,EACdC,EAAgB,GACpB,MAAMC,EAAU,GAEhB,IAAIC,EAAW,IAAIC,EAAe,eAAe,EAEjD,MAAMC,EAAa,IAAM,CACvBP,EAAS,UAAU,OAAO,WAAW,CACvC,EAEMQ,EAAa,IAAM,CACvBR,EAAS,UAAU,IAAI,WAAW,CACpC,EAGMS,EAAgB,IAAM,CAC1B,MAAMC,EAAO,SAAS,cAAc,eAAe,EACnD,OAAIA,EACKA,EAAK,sBAAuB,EAAC,OAE/B,CACT,EAEMC,EAAa,IAAM,CACvB,MAAMC,EAAaH,IACfG,EAAa,GACf,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,CAEL,EAEMC,EAAqB,MAAMC,GAAS,CACxC,GAAI,CAIA,GAHHA,EAAM,eAAc,EAEpBX,EAAgBL,EAAa,SAAS,WAAW,MAAM,KAAI,EACpD,CAACK,EAAe,CACpBY,EAAS,MAAM,CACb,QAAS,+BACT,SAAU,UAClB,CAAO,EACD,MACD,CAEDb,EAAc,EACdD,EAAc,UAAU,IAAI,WAAW,EACvCM,IAEA,MAAMS,EAAW,MAAMtB,EAAYS,EAAeD,CAAW,EAI7D,GAFAM,IAEIQ,EAAS,KAAK,KAAK,SAAW,EAAG,CACnCD,EAAS,MAAM,CACb,QAAS,2EACT,SAAU,UAClB,CAAO,EACDhB,EAAU,UAAY,GACtBD,EAAa,MAAK,EAClB,MACD,CAEH,MAAMmB,EAAuBD,EAAS,KAAK,KAAK,IAAIE,GAAc3B,EAA0B2B,CAAU,CAAC,EAAE,KAAK,EAAE,EAC9GnB,EAAU,UAAYkB,EACtBhB,EAAc,UAAU,OAAO,WAAW,EAC1CI,EAAS,QAAO,CAEjB,OAAQc,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,EAEMC,EAAqB,MAAMN,GAAS,CACxC,GAAI,CACFZ,IACA,MAAMc,EAAW,MAAMtB,EAAYS,EAAeD,CAAW,EAEvDe,EAAuBD,EAAS,KAAK,KAAK,IAAIE,GAAc3B,EAA0B2B,CAAU,CAAC,EAAE,KAAK,EAAE,EAEhHnB,EAAU,mBAAmB,YAAakB,CAAoB,EAE9DN,IAEA,MAAMU,EAAYL,EAAS,KAAK,UAC1BM,EAAa,KAAK,KAAKD,EAAYjB,CAAO,EAE/CF,IAAgBoB,IACfrB,EAAc,UAAU,IAAI,WAAW,EACvCc,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,GAGHV,EAAS,QAAO,CAEjB,OAAQc,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,EAGArB,EAAa,iBAAiB,SAAUe,CAAkB,EAC1DZ,EAAc,iBAAiB,QAASmB,CAAkB"}